<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no">
<title>78长度查询器</title>
<style>*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',system-ui,-apple-system,sans-serif}body{-webkit-text-size-adjust:100%!important;text-size-adjust:100%!important;-moz-text-size-adjust:100%!important;overflow:hidden;touch-action:none;background:linear-gradient(135deg,#eff8ff 0%,#e6eeff 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:16px;color:#3A4B63}.card{width:100%;max-width:380px;background:#fff;border-radius:20px;padding:24px;box-shadow:0 10px 25px -5px rgba(74,137,220,0.1),0 8px 10px -6px rgba(74,137,220,0.05);transition:all .5s ease}.card:hover{box-shadow:0 20px 35px -10px rgba(74,137,220,0.15),0 10px 15px -5px rgba(74,137,220,0.1)}.title-section{text-align:center;margin-bottom:32px}.main-title{font-size:clamp(1.8rem,5vw,2.5rem);font-weight:700;color:#4A89DC;margin-bottom:8px}.sub-title{color:#6b7280;font-size:1.0425rem;margin-top:15px}.input-section{margin-bottom:32px}.input-label{display:block;color:#4b5563;margin-bottom:8px;font-size:1rem}.username-input{width:100%;padding:12px 16px;border-radius:12px;border:1px solid #e5e7eb;font-size:1rem;color:#374151;outline:none;transition:all .2s ease}.username-input:focus{border-color:#4A89DC;box-shadow:0 0 0 2px rgba(74,137,220,0.3)}.username-input:disabled{background:#f3f4f6;cursor:not-allowed;border-color:#d1d5db;color:#9ca3af}.analyze-btn{width:100%;margin-top:20px;background:#4A89DC;color:#fff;font-weight:500;padding:16px 24px;border-radius:12px;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s ease;font-size:1.05rem}.analyze-btn:hover{box-shadow:0 10px 15px -3px rgba(74,137,220,0.2);transform:translateY(-2px)}.analyze-btn:active{transform:translateY(0)}.btn-loading{background:#d1d5db;cursor:not-allowed}.spinner{display:inline-block;width:18px;height:18px;border:2px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:#fff;animation:spin 1s ease-in-out infinite;margin-right:8px}@keyframes spin{to{transform:rotate(360deg)}}.result-section{background:#F5F9FF;border-radius:20px;padding:24px;display:none;opacity:0;transform:scale(0.95);transition:all .5s ease}.result-section.show{display:block;margin-top:24px;opacity:1;transform:scale(1)}.result-title{font-size:1.25rem;font-weight:600;color:#4b5563;margin-bottom:16px}.username-result{color:#6b7280;margin-bottom:4px}.username-result span{font-weight:500}.length-result{text-align:center;margin-bottom:32px}.length-value{font-size:clamp(3rem,10vw,5rem);font-weight:700;color:#4A89DC}.progress-container{margin-bottom:24px}.progress-bar-container{height:12px;background:#e5e7eb;border-radius:6px;overflow:hidden}.progress-bar{height:100%;background:#4A89DC;border-radius:6px;width:0%;transition:width 1s ease}.progress-labels{display:flex;justify-content:space-between;color:#6b7280;font-size:.75rem;margin-top:8px}.evaluation{text-align:center;padding:8px 16px;background:#eff6ff;border-radius:8px;color:#4b5563}.more-btn{position:fixed;width:38px;height:38px;border:2px solid #fff;border-radius:50%;font-size:13px;line-height:34px;text-align:center;bottom:60px;right:15px;background:rgba(0,0,0,0.2);z-index:99999;display:none;transition:all .3s ease}.more-btn:hover{transform:scale(1.1)}.more-btn a{color:#fff;text-decoration:none;display:block;width:100%;height:100%}</style>
</head>
<body>
<div class="card">
  <div class="title-section">
    <h1 class="main-title">78长度查询器</h1>
    <p class="sub-title">看看你的78长度</p>
  </div>
  <div class="input-section">
    <label for="username" class="input-label">用户名：</label>
    <input type="text" id="username" class="username-input" placeholder="请输入用户名">
    <button id="analyzeBtn" class="analyze-btn"><span>开始查询</span></button>
  </div>
  <div id="resultSection" class="result-section">
    <h2 class="result-title">分析结果</h2>
    <div class="username-result"><p>用户名: <span id="resultUsername">***</span></p></div>
    <div class="length-result"><div id="lengthResult" class="length-value">0cm</div></div>
    <div class="progress-container">
      <div class="progress-bar-container"><div id="progressBar" class="progress-bar"></div></div>
      <div class="progress-labels"><span>0-5</span><span>6-10</span><span>11-13</span><span>14-16</span><span>17-20</span><span>21-25</span></div>
    </div>
    <div class="evaluation"><p id="evaluation">分析...</p></div>
  </div>
</div>
<div class="more-btn" id="more-btn"><a href="">更多</a></div>
<script>
const clickSound=new Audio('static/1.mp3');
function initMoreBtnLink(){const e=document.querySelector('.more-btn a');fetch('../domain.php').then(r=>{if(!r.ok)throw new Error(`请求失败：${r.status}`);return r.json()}).then(d=>{d&&d.success&&"string"==typeof d.domain&&d.domain.trim()&&(e.href=d.domain.trim())}).catch(e=>{})}
window.onload=()=>initMoreBtnLink();
const [analyzeBtn,usernameInput,resultSection,resultUsername,lengthResult,progressBar,evaluation,moreBtn]=['analyzeBtn','username','resultSection','resultUsername','lengthResult','progressBar','evaluation','more-btn'].map(id=>document.getElementById(id));

function getRandomLength(){
  const r=Math.random()*100;
  if(r<20)return Math.floor(Math.random()*6);
  if(r<35)return Math.floor(Math.random()*5)+6;
  if(r<45)return Math.floor(Math.random()*3)+11;
  if(r<55)return Math.floor(Math.random()*3)+14;
  if(r<75)return Math.floor(Math.random()*4)+17;
  return Math.random()>0.5?Math.floor(Math.random()*5)+21:Math.floor(Math.random()*901)+100;
}

analyzeBtn.addEventListener('click',()=>{
  clickSound.play().catch(e=>{});
  const username=usernameInput.value.trim();
  if(!username)return alert('信息不能为空');
  
  // 分析中禁用输入框，阻止修改用户名
  usernameInput.disabled=true;
  analyzeBtn.disabled=true;
  analyzeBtn.classList.add('btn-loading');
  analyzeBtn.innerHTML='<div class="spinner"></div><span>分析中...</span>';
  
  setTimeout(()=>{
    resultSection.classList.add('show');
    moreBtn.style.display='block';
    resultUsername.textContent=username;
    const len=getRandomLength();
    progressBar.style.width=`${len>=100?100:len/25*100}%`;
    
    const evals={
      s:['略短：别灰心，还有成长空间','略短：不必焦虑，尺寸并非一切','略短：保持自信，内在更重要'],
      sh:['较短：还算正常范围','较短：多数人的水平，不必担心','较短：够用就好，无需过度比较'],
      ml:['中等偏下：仍需努力','中等偏下：中间水平，还有提升空间','中等偏下：日常使用足够，不必苛求'],
      m:['中规中矩：还行吧,不算丢人','中规中矩：标准水平，无需自卑','中规中矩：大多数人羡慕的程度'],
      g:['良好：超过平均水平','良好：已经很出色了，值得肯定','良好：超越多数人，继续保持'],
      e:['优秀：值得骄傲的长度','优秀：相当出色，令人羡慕','优秀：顶级水平，无需低调']
    };
    
    let evalText;
    if(len<=5)evalText=evals.s[Math.floor(Math.random()*3)];
    else if(len<=10)evalText=evals.sh[Math.floor(Math.random()*3)];
    else if(len<=13)evalText=evals.ml[Math.floor(Math.random()*3)];
    else if(len<=16)evalText=evals.m[Math.floor(Math.random()*3)];
    else if(len<=20)evalText=evals.g[Math.floor(Math.random()*3)];
    else evalText=evals.e[Math.floor(Math.random()*3)];
    
    evaluation.textContent=evalText;
    animateValue(lengthResult,0,len,1500);
    
    // 分析完成启用输入框，允许重新修改
    usernameInput.disabled=false;
    analyzeBtn.disabled=false;
    analyzeBtn.classList.remove('btn-loading');
    analyzeBtn.innerHTML='<span>重新检测</span>';
  },2000);
});

usernameInput.addEventListener('keypress',e=>e.key==='Enter'&&analyzeBtn.click());

function animateValue(el,s,e,d){
  let st=null;
  const step=t=>{
    st||(st=t);
    const p=Math.min((t-st)/d,1);
    el.textContent=`${Math.floor(p*(e-s)+s)}cm`;
    p<1&&requestAnimationFrame(step);
  };
  requestAnimationFrame(step);
}

document.addEventListener('touchmove',e=>e.preventDefault(),{passive:false});
document.addEventListener('wheel',e=>e.preventDefault(),{passive:false});
</script>
</body>
</html>